<h1><%= @evaluation %></h1>




<div class='chart-container'>
    <div class='total'>
            <div class='note_cam'>
                <div id="chartdiv"></div>
                <div id="charttotal"></div>
            </div>
        <div id='affichage'><%= @evaluation.score %></div>
    </div>
</div>

<div style="margin-top: 3rem;">
<h6><%= @evaluation.value1 %></h6>
<h6><%= @evaluation.value5 %></h6>
<h6><%= @questionnaire.importance1 %></h6>
<h6><%= @questionnaire.importance5 %></h6>
</div>


<script src="https://www.amcharts.com/lib/4/core.js"></script>
<script src="https://www.amcharts.com/lib/4/charts.js"></script>
<script src="https://www.amcharts.com/lib/4/themes/material.js"></script>
<script src="https://www.amcharts.com/lib/4/themes/animated.js"></script>

<script type="text/javascript">
  /**
   * ---------------------------------------
   * This demo was created using amCharts 4.
   *
   * For more information visit:
   * https://www.amcharts.com/
   *
   * Documentation is available at:
   * https://www.amcharts.com/docs/v4/
   * ---------------------------------------
   */



  // Themes begin
  am4core.useTheme(am4themes_material);
  am4core.useTheme(am4themes_animated);
  // Themes end

  // Create chart
  var chart = am4core.create("chartdiv", am4charts.PieChart);
  chart.hiddenState.properties.opacity = 0; // this creates initial fade-in
  chart.innerRadius = am4core.percent(15);
  var charttot = am4core.create("charttotal", am4charts.PieChart);
  charttot.hiddenState.properties.opacity = 0; // this creates initial fade-in
  charttot.innerRadius = am4core.percent(11);

  var note1 = <%= @evaluation.value1 %>;
  var note2 = <%= @evaluation.value2 %>;
  var note3 = <%= @evaluation.value3 %>;
  var note4 = <%= @evaluation.value4 %>;
  var note5 = <%= @evaluation.value5 %>;


  var val1 = <%= @questionnaire.importance1 %>;
  var val2 = <%= @questionnaire.importance2 %>;
  var val3 = <%= @questionnaire.importance3 %>;
  var val4 = <%= @questionnaire.importance4 %>;
  var val5 = <%= @questionnaire.importance5 %>;

  chart.data = [

    {
      choice: "Choix 1",
      part: val1,
      note: note1,
      "color": am4core.color('#384B9B')
    },
    {
      choice: "Choix 2",
      part: val2,
      note: note2,
      "color": am4core.color('#ED6B80')
    },
    {
      choice: "Choix 3",
      part: val3,
      note: note3,
      "color": am4core.color('#F8CF62')
    },
    {
      choice: "Choix 4",
      part: val4,
      note: note4,
      "color": am4core.color('#81B3A3')
    },
    {
      choice: "Choix 5",
      part: val5,
      note: note5,
      "color": am4core.color('#B6D239')
    },

  ];

  charttot.data = [

    {
      choice: "Choix 1",
      part: val1,
      note: 1,
      "color": am4core.color('#384B9B')
    },
    {
      choice: "Choix 2",
      part: val2,
      note: 1,
      "color": am4core.color('#ED6B80')
    },
    {
      choice: "Choix 3",
      part: val3,
      note: 1,
      "color": am4core.color('#F8CF62')
    },
    {
      choice: "Choix 4",
      part: val4,
      note: 1,
      "color": am4core.color('#81B3A3')
    },
    {
      choice: "Choix 5",
      part: val5,
      note: 1,
      "color": am4core.color('#B6D239')
    },

  ];


  var series = chart.series.push(new am4charts.PieSeries());
  series.dataFields.value = "part";
  series.dataFields.radiusValue = "note";
  series.dataFields.category = "choice";
  series.slices.template.propertyFields.fill = "color";
  series.colors.step = 3;
  series.labels.template.disabled = true;
  series.ticks.template.disabled = true;
  series.hiddenState.properties.endAngle = -90;


  series.slices.template.tooltipText = "";


  var seriestot = charttot.series.push(new am4charts.PieSeries());
  seriestot.dataFields.value = "part";
  seriestot.dataFields.radiusValue = "note";
  seriestot.dataFields.category = "choice";
  seriestot.slices.template.propertyFields.fill = "color";
  seriestot.colors.step = 3;
  seriestot.labels.template.disabled = true;
  seriestot.ticks.template.disabled = true;
  seriestot.hiddenState.properties.endAngle = -90;
  // Put a thick white border around each Slice
  //seriestot.slices.template.stroke = am4core.color("#000");
  //seriestot.slices.template.strokeWidth = 2;
  //seriestot.slices.template.strokeOpacity = 1;

  seriestot.slices.template.fillOpacity = 0.2;

  //chart.legend = new am4charts.Legend();

</script>

<style type="text/css">
  h1{
  text-align: center;
  font-family: 'Montserrat';
  font-size: 3rem;
  margin-bottom: 40vh;
}



body {
  text-align: center;
}

.container {
  display : flex;
  flex-direction: column;
}

.total {
  display:flex;
  justify-content: center;
  align-items: center;
}

.note_cam {
  display:flex;
  position:absolute;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index:0;
}

#chartdiv {
  position:absolute;
  width: 100vh;
  height: 500px;
  component-align:center;
  font-family: 'Montserrat';
  font-size: 1.3rem;
  z-index:100;
}

#charttotal{
  position:absolute;
  width: 100vh;
  height: 700px;
  component-align:center;
  font-family: 'Montserrat';
  font-size: 1.3rem;
}

#affichage {
  text-align:center;
  font-family: 'Montserrat';
  font-size: 2rem;
  font-weight: bold;
}



}


</style>
